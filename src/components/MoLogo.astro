---
const { MaskId = "m-hero"} = Astro.props;
---
<svg class="logo-svg" viewBox="0 0 485.55 328.12">
    <defs>
        <mask id={MaskId}>
            <rect width="100%" height="100%" fill="white"/>
            <g class="p-mover gyro-pupil">
                <path d="M417.01,243.77c-2.32,0-4.33.84-6.04,2.53-1.71,1.69-2.42,3.57-2.15,5.64.27,2.72,1.12,4.6,2.56,5.64,1.43,1.04,3.31,1.55,5.63,1.55s4.23-.65,5.73-1.94c1.5-1.29,2.25-3.05,2.25-5.25,0-2.07-.68-3.95-2.05-5.64-1.37-1.68-3.34-2.53-5.93-2.53Z" fill="black"/>
            </g>
        </mask>
    </defs>
    <path class="st0" d="M328.12,220.62c-.32,27.92-1.89,56.41-14.39,80.55-12.2,22.93-38.52,34.24-60.85,21.85-8.31-4.44-14.96-10.99-20.71-18.4-5.03-6.62-8.15-14.42-11.77-21.86-3.89-8.5-9.3-14.39-17.53-7.12-13.93,13.27-29.8,31.39-50.65,24.65-9.47-2.64-17.26-8.95-25.87-13.48-11.79-6.59-19.04-1.13-25.47,9.39-4.96,7.76-9.97,16.1-17.34,21.74-15.18,12.04-36.98,12.75-53.17,2.31-18.41-11.6-25.43-33.05-28.39-54.51C-.43,247.94-.14,229.43.29,211.67,1.59,149.02,5.67,82.37,38.82,28.06,48.52,12.75,63.53-1.31,82.29.1c28.27,1.44,46.91,33.47,72.5,39.05,11.48,2.59,22.47-1.83,33.13-7.76,87.38-58.33,128.16,20.08,136.31,111.89,2.69,25.8,3.67,51.14,3.9,77.08v.27Z"/>
    <g class="intero-occhio" style={`mask: url(#${MaskId});`}>
        <path class="st0" d="M420.08,181.34c8.18,0,15.38.94,21.59,2.82,6.2,1.88,11.63,4.38,16.27,7.49,4.64,3.11,8.52,6.65,11.66,10.6,3.14,3.96,5.73,8.01,7.78,12.16,4.77,9.72,7.5,20.68,8.18,32.87,0,9.21-.96,17.28-2.86,24.21-1.91,6.94-4.4,12.97-7.47,18.09-3.07,5.12-6.55,9.43-10.44,12.93-3.89,3.5-7.88,6.42-11.97,8.75-9.55,5.32-20.46,8.36-32.74,9.14-9.28,0-17.39-.94-24.35-2.82-6.96-1.88-13.03-4.34-18.21-7.39-5.19-3.05-9.55-6.55-13.1-10.5-3.55-3.95-6.48-8-8.8-12.16-5.46-9.59-8.53-20.55-9.21-32.87,0-10.11,1.06-18.87,3.17-26.26,2.11-7.39,4.91-13.78,8.39-19.16,3.48-5.38,7.4-9.79,11.77-13.23,4.36-3.43,8.87-6.19,13.5-8.27,10.77-4.79,23.05-6.93,36.83-6.42Z"/>
    </g>
    <g class="sopracciglio">
        <path class="st2" d="M452.67,128.55c4.21.51,7.43,1.57,9.66,3.17,2.23,1.6,3.82,3.3,4.79,5.09,1.2,2.18,1.81,4.48,1.81,6.91.12,2.56-.24,4.99-1.08,7.29-.72,1.92-1.96,3.78-3.7,5.57-1.75,1.79-4.43,3.01-8.04,3.65-4.58.77-10,1.37-16.26,1.82-6.26.45-12.86.73-19.78.86-6.93.13-13.91.06-20.95-.19-7.05-.26-13.52-.64-19.42-1.15-4.22-.38-7.47-1.41-9.75-3.07-2.29-1.66-3.91-3.39-4.88-5.18-1.21-2.17-1.87-4.54-1.99-7.1-.24-2.81.24-5.37,1.44-7.68.96-2.05,2.62-4.03,4.97-5.95,2.35-1.92,5.93-3.26,10.75-4.03,8.67-1.28,17.31-1.98,25.92-2.11,8.61-.13,16.35-.06,23.21.19,8.07.38,15.83,1.03,23.3,1.92Z"/>
    </g>
</svg>

<style>
/* ... il tuo CSS rimane identico ... */
.logo-svg { width: 100%; height: auto; display: block; overflow: visible; }
.st0 { fill: var(--accent-coral); }
.st2 { fill: var(--accent-gold); }
.intero-occhio { transform-origin: 420px 245px !important; transition: transform 0.1s ease-out; }
.sopracciglio { transform-origin: 410px 145px !important; transition: transform 0.1s ease-out; }
.blinking { transform: scaleY(0.01) !important; }
.brow-down { transform: translateY(20px) !important; }

/* Aggiungiamo un tocco di fluidit√† alla pupilla */
.gyro-pupil {
    transition: transform 0.15s ease-out;
}
</style>

<script>
    import { gyroState } from '../scripts/gyro-logic.js';

    function initLogoBlink() {
        const logos = document.querySelectorAll<HTMLElement>('.logo-svg');

        logos.forEach(logo => {
            if (logo.dataset.initialized === 'true') return;
            logo.dataset.initialized = 'true';

            const eye = logo.querySelector<SVGElement | HTMLElement>('.intero-occhio');
            const brow = logo.querySelector<SVGElement | HTMLElement>('.sopracciglio');
            const pupil = logo.querySelector<SVGElement | HTMLElement>('.gyro-pupil');

            // 1. Funzione Battito Ciglia (rimane uguale)
            function blink() {
                if(eye) eye.classList.add('blinking');
                if (brow) brow.classList.add('brow-down');
                setTimeout(() => {
                    eye?.classList.remove('blinking');
                    brow?.classList.remove('brow-down');
                }, 120);
                setTimeout(blink, Math.random() * 4000 + 2500);
            }
            setTimeout(blink, Math.random() * 2000);
        });
    }

    initLogoBlink();
</script>