---
const { color = "var(--accent-coral)" } = Astro.props;
---
<span id="me-mo-toggle">
    <svg viewBox="0 0 616.2 328.12">
        <path class="st0" d="M187.92,31.39c-10.66,5.93-21.65,10.35-33.13,7.76C129.2,33.57,110.56,1.54,82.29.1c-18.76-1.41-33.77,12.65-43.47,27.96C5.67,82.37,1.59,149.02.29,211.67c-.43,17.76-.72,36.27,1.69,54.07,2.96,21.46,9.98,42.91,28.39,54.51,16.19,10.44,37.99,9.73,53.17-2.31,7.37-5.64,12.38-13.98,17.34-21.74,6.43-10.52,13.68-15.98,25.47-9.39,8.61,4.53,16.4,10.84,25.87,13.48,20.85,6.74,36.72-11.38,50.65-24.65,8.23-7.27,13.64-1.38,17.53,7.12,3.62,7.44,6.74,15.24,11.77,21.86,5.75,7.41,12.4,13.96,20.71,18.4,22.33,12.39,48.65,1.08,60.85-21.85,12.5-24.14,14.07-52.63,14.39-80.55h.01v-.26c-.23-25.94-1.21-51.28-3.9-77.08-8.15-91.81-48.93-170.22-136.31-111.89h0Z" />
        
        <path id="main-morph-path" class="st0" d="M486.8,7.15c39.7,2.42,88.59,4.03,114.73,36.22h0c22.73,34.65-8.92,66.3-42.96,74.33-31.39,11.79-11.26,18.52,5.05,31.44,13.59,11.27,10.95,32.54-1.2,43.71-8.11,8.17-25.44,13.69-27.09,18.98-2.35,8.73,37.25,14.67,44.75,18.42,25.65,10.39,47.95,36.02,29.14,60.04-8.27,10.59-20.18,17.13-32.84,22.17-13.77,5.49-28.16,9.19-42.79,11.56-57.92,9.39-135.75,5.49-169.67-42.18h0c-25.36-45.72-16.66-115.79-13.38-170.55,3.6-82.9,61.02-106.26,135.47-104.16l.79.03h0Z" />

        <defs>
            <path id="path-mo-target" d="M365.06,153.31c.96,1.79,2.59,3.52,4.88,5.18,2.29,1.66,5.54,2.69,9.75,3.07,5.9.51,12.37.89,19.42,1.15,7.04.25,14.03.32,20.95.19s13.52-.42,19.78-.86c6.26-.45,11.68-1.06,16.26-1.82,3.61-.64,6.29-1.86,8.04-3.65,1.74-1.79,2.98-3.65,3.7-5.57.84-2.3,1.2-4.73,1.08-7.29,0-2.43-.6-4.73-1.81-6.91-.96-1.79-2.56-3.48-4.79-5.09-2.23-1.6-5.45-2.65-9.66-3.17-7.47-.89-15.24-1.54-23.3-1.92-6.86-.25-14.6-.32-23.21-.19s-17.25.83-25.92,2.11c-4.82.77-8.4,2.11-10.75,4.03s-4.01,3.9-4.97,5.95c-1.21,2.3-1.69,4.86-1.44,7.68.12,2.56.78,4.93,1.99,7.1h0ZM477.37,214.4c-2.05-4.15-4.64-8.2-7.78-12.16-3.14-3.95-7.03-7.49-11.66-10.6-4.64-3.11-10.06-5.61-16.27-7.49s-13.4-2.82-21.59-2.82c-13.78-.52-26.06,1.62-36.83,6.42-4.64,2.08-9.14,4.83-13.5,8.27-4.37,3.44-8.29,7.85-11.77,13.23-3.48,5.38-6.28,11.77-8.39,19.16-2.12,7.39-3.17,16.14-3.17,26.26.68,12.32,3.75,23.28,9.21,32.87,2.32,4.15,5.25,8.2,8.8,12.16s7.91,7.46,13.1,10.5c5.18,3.05,11.25,5.51,18.21,7.39s15.07,2.82,24.35,2.82c12.28-.78,23.19-3.82,32.74-9.14,4.09-2.33,8.08-5.25,11.97-8.75s7.37-7.81,10.44-12.93,5.56-11.15,7.47-18.09c1.91-6.93,2.86-15.01,2.86-24.21-.68-12.19-3.41-23.14-8.18-32.87v-.02ZM422.74,257.19c-1.5,1.3-3.41,1.94-5.73,1.94s-4.19-.52-5.63-1.55c-1.43-1.04-2.29-2.92-2.56-5.64-.28-2.07.44-3.95,2.15-5.64,1.7-1.68,3.71-2.53,6.04-2.53,2.59,0,4.57.84,5.93,2.53s2.05,3.57,2.05,5.64c0,2.21-.75,3.96-2.25,5.25h0Z" />
        </defs>
    </svg>
</span>

<style define:vars={{ color }}>
    /* Container principale del toggle */
 #me-mo-toggle {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    vertical-align: baseline;
   /* Usiamo em per mantenere le proporzioni con il font-size di ABOUT */
    width: 2.2em;
    height: 1.1em;
    margin-left: 0.2em;
    position: relative;
   /* Allineamento ottico sulla baseline */
    transform: translateY(0.15em);
}
/* L'SVG unico all'interno del toggle */
 #me-mo-toggle svg {
    width: 100%;
    height: 100%;
    display: block;
   /* Il colore viene ereditato o definito qui */
    fill: var(--color);
   /* Opzionale: aggiunge una transizione fluida anche per il colore se dovesse cambiare */
    transition: fill 0.3s ease;
}
</style>
<script>
    import { gsap } from "gsap";
    import { MorphSVGPlugin } from "gsap/MorphSVGPlugin";
    gsap.registerPlugin(MorphSVGPlugin);

    // 2. MORPHING OCCHIO Beyond (Loop Infinito)
    // Questa animazione trasforma il tracciato dell'occhio da ME a MO e viceversa
    const mainMorphPath = document.getElementById("main-morph-path");
    if (mainMorphPath) {
        const eyeTl = gsap.timeline({
            repeat: -1,
            yoyo: true,
            repeatDelay: 0.5,
        });

        eyeTl.to(mainMorphPath, {
            duration: 1.5,
            morphSVG: "#path-mo-target",
            ease: "expo.inOut"
        });
    }
</script>